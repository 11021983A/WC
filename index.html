<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞—è–≤–∫–∞ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</title>
    <style>
        /* –ü—Ä–æ—Å—Ç—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        body {
            font-family: Arial, sans-serif;
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }

        .room-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .problem-list {
            margin: 20px 0;
        }

        .problem-item {
            margin: 10px 0;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .problem-item:hover {
            border-color: #2196F3;
            background-color: #f8f9ff;
        }

        .problem-item.selected {
            border-color: #2196F3;
            background-color: #e3f2fd;
        }

        .problem-item input {
            margin-right: 10px;
        }

        .custom-text {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: none;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: #1976D2;
        }

        .message {
            display: none;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            text-align: center;
        }

        .success {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .error {
            background: #ffcdd2;
            color: #c62828;
        }

        .debug {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 12px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –ó–∞—è–≤–∫–∞ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h1>
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–º–µ—â–µ–Ω–∏–∏ -->
        <div class="room-info" id="roomInfo">
            –ü–æ–º–µ—â–µ–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>

        <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø–æ–∑–∂–µ) -->
        <div id="debugInfo" class="debug" style="display: none;">
            <strong>–û—Ç–ª–∞–¥–∫–∞:</strong><br>
            URL: <span id="debugUrl"></span><br>
            –ü–∞—Ä–∞–º–µ—Ç—Ä room: <span id="debugRoom"></span>
        </div>

        <form id="requestForm">
            <div class="problem-list">
                <div class="problem-item" onclick="selectProblem(this, 'soap')">
                    <input type="radio" name="problem" value="soap" id="soap">
                    <label for="soap">üßº –ó–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –º—ã–ª–æ</label>
                </div>

                <div class="problem-item" onclick="selectProblem(this, 'paper')">
                    <input type="radio" name="problem" value="paper" id="paper">
                    <label for="paper">üßª –ó–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –±—É–º–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</label>
                </div>

                <div class="problem-item" onclick="selectProblem(this, 'trash')">
                    <input type="radio" name="problem" value="trash" id="trash">
                    <label for="trash">üóëÔ∏è –í—ã–Ω–µ—Å—Ç–∏ –º—É—Å–æ—Ä</label>
                </div>

                <div class="problem-item" onclick="selectProblem(this, 'cleaning')">
                    <input type="radio" name="problem" value="cleaning" id="cleaning">
                    <label for="cleaning">üßΩ –ü—Ä–∏–±—Ä–∞—Ç—å—Å—è</label>
                </div>

                <div class="problem-item" onclick="selectProblem(this, 'other')">
                    <input type="radio" name="problem" value="other" id="other">
                    <label for="other">üìù –î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞</label>
                </div>

                <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Å–≤–æ–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ -->
                <textarea 
                    id="customText" 
                    class="custom-text" 
                    placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..."
                    rows="3"
                ></textarea>
            </div>

            <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        </form>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="successMessage" class="message success">
            ‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ò–Ω–∂–µ–Ω–µ—Ä—ã –ø–æ–ª—É—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
        </div>

        <div id="errorMessage" class="message error">
            ‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.
        </div>
    </div>

    <script>
        // ============ –£–ü–†–û–©–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê –î–õ–Ø QR-–ö–û–î–û–í ============

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏—è
        let roomData = {
            id: 'unknown',           // ID –ø–æ–º–µ—â–µ–Ω–∏—è –∏–∑ QR-–∫–æ–¥–∞
            displayName: '–ü–æ–º–µ—â–µ–Ω–∏–µ' // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ QR-–∫–æ–¥–µ)
        };

        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ß–∏—Ç–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä room –∏–∑ URL (–∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—é—Ç QR-–∫–æ–¥—ã)
            loadRoomFromQR();
            updateRoomDisplay();
            showDebugInfo(); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ - –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø–æ–∑–∂–µ
        });

        /**
         * –£–ü–†–û–©–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è –∏–∑ QR-–∫–æ–¥–∞
         * –û–∂–∏–¥–∞–µ—Ç URL –≤–∏–¥–∞: https://11021983a.github.io/WC/?room=–¢—É–∞–ª–µ—Ç_–º—É–∂_–ö–æ—Ä–ø—É—Å_–ê_4_—ç—Ç
         */
        function loadRoomFromQR() {
            const params = new URLSearchParams(window.location.search);
            const roomParam = params.get('room'); // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä room
            
            console.log('–ü–∞—Ä–∞–º–µ—Ç—Ä room –∏–∑ URL:', roomParam);

            // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –∫–∞–∫ –µ—Å—Ç—å
            if (roomParam) {
                roomData.id = roomParam;
                roomData.displayName = roomParam; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—á–Ω–æ —Ç–æ –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —á—Ç–æ –≤ QR-–∫–æ–¥–µ
                console.log('–ü–æ–º–µ—â–µ–Ω–∏–µ –∏–∑ QR-–∫–æ–¥–∞:', roomData);
            } else {
                // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                roomData.id = 'unknown';
                roomData.displayName = '–ü–æ–º–µ—â–µ–Ω–∏–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ';
                console.log('QR-–∫–æ–¥ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
            }
        }

        /**
         * –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–º–µ—â–µ–Ω–∏–∏
         */
        function updateRoomDisplay() {
            const roomInfo = document.getElementById('roomInfo');
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ QR-–∫–æ–¥–∞, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            roomInfo.textContent = roomData.displayName;
        }

        /**
         * –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–¢–õ–ê–î–ö–ò: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ URL
         * –£–±–µ—Ä–∏—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         */
        function showDebugInfo() {
            const debugInfo = document.getElementById('debugInfo');
            const debugUrl = document.getElementById('debugUrl');
            const debugRoom = document.getElementById('debugRoom');
            
            debugUrl.textContent = window.location.href;
            debugRoom.textContent = new URLSearchParams(window.location.search).get('room') || '–Ω–µ –Ω–∞–π–¥–µ–Ω';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä debug –≤ URL
            const params = new URLSearchParams(window.location.search);
            if (params.get('debug') === '1') {
                debugInfo.style.display = 'block';
            }
        }

        /**
         * –í—ã–±–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
         */
        function selectProblem(element, problemType) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            document.querySelectorAll('.problem-item').forEach(item => {
                item.classList.remove('selected');
            });

            // –í—ã–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
            element.classList.add('selected');

            // –û—Ç–º–µ—á–∞–µ–º —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–∫—É
            const radio = element.querySelector('input');
            radio.checked = true;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è —Ç–µ–∫—Å—Ç–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞"
            const customText = document.getElementById('customText');
            if (problemType === 'other') {
                customText.style.display = 'block';
                customText.focus();
            } else {
                customText.style.display = 'none';
                customText.value = '';
            }
        }

        /**
         * –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ QR-–∫–æ–¥–∞
         */
        document.getElementById('requestForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
            const selectedProblem = document.querySelector('input[name="problem"]:checked');
            if (!selectedProblem) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É');
                return;
            }

            // –ü–æ–ª—É—á–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
            let problemDescription = '';
            if (selectedProblem.value === 'other') {
                const customText = document.getElementById('customText').value.trim();
                if (!customText) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É');
                    return;
                }
                problemDescription = '–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞: ' + customText;
            } else {
                // –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç –∏–∑ label
                const problemLabels = {
                    'soap': '–ó–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –º—ã–ª–æ',
                    'paper': '–ó–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –±—É–º–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏',
                    'trash': '–í—ã–Ω–µ—Å—Ç–∏ –º—É—Å–æ—Ä',
                    'cleaning': '–ü—Ä–∏–±—Ä–∞—Ç—å—Å—è'
                };
                problemDescription = problemLabels[selectedProblem.value];
            }

            // –£–ü–†–û–©–ï–ù–û: –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ —Ç–æ–ª—å–∫–æ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏–∑ QR-–∫–æ–¥–∞
            const requestData = {
                // –î–∞–Ω–Ω—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è –∏–∑ QR-–∫–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ)
                roomId: roomData.id,                    // –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ QR-–∫–æ–¥–∞
                roomDisplayName: roomData.displayName,  // –¢–æ –∂–µ —Å–∞–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ

                // –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
                problemType: selectedProblem.value,
                problemDescription: problemDescription,

                // –í—Ä–µ–º—è
                date: new Date().toLocaleDateString('ru-RU'),
                time: new Date().toLocaleTimeString('ru-RU'),
                timestamp: new Date().toISOString(),

                // URL –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                sourceUrl: window.location.href
            };

            // –í—ã–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            console.log('–î–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏:', requestData);
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É
            sendRequest(requestData);
        });

        /**
         * –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –≤ Telegram
         */
        async function sendToTelegram(requestData) {
            // –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à–∏!
            const BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê';  // –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather
            const CHAT_ID = '–í–ê–®_CHAT_ID';       // ID –≥—Ä—É–ø–ø—ã –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å

            // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const message = `üîß *–ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–ï*

üìç *–ü–æ–º–µ—â–µ–Ω–∏–µ:* ${requestData.roomDisplayName}

‚ö†Ô∏è *–ü—Ä–æ–±–ª–µ–º–∞:* ${requestData.problemDescription}

üïê *–í—Ä–µ–º—è:* ${requestData.date} –≤ ${requestData.time}

#–∑–∞—è–≤–∫–∞ #–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ`;

            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                const result = await response.json();
                
                if (result.ok) {
                    console.log('–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram!', result);
                    return { success: true, data: result };
                } else {
                    console.error('–û—à–∏–±–∫–∞ Telegram API:', result);
                    return { success: false, error: result.description };
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return { success: false, error: error.message };
            }
        }

        /**
         * –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –∏–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ - —Ç–µ–ø–µ—Ä—å —Å Telegram
         */
        async function sendRequest(data) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
            const submitBtn = document.querySelector('.submit-btn');
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
            submitBtn.disabled = true;

            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                const telegramResult = await sendToTelegram(data);
                
                if (telegramResult.success) {
                    showSuccess();
                    console.log('‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram!');
                } else {
                    showError(`–û—à–∏–±–∫–∞ Telegram: ${telegramResult.error}`);
                    console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', telegramResult.error);
                }
                
            } catch (error) {
                console.error('‚ùå –û–±—â–∞—è –æ—à–∏–±–∫–∞:', error);
                showError('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.');
            }

            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
            submitBtn.disabled = false;
        }

        /**
         * –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
         */
        function showSuccess() {
            const successMsg = document.getElementById('successMessage');
            const errorMsg = document.getElementById('errorMessage');
            
            successMsg.style.display = 'block';
            errorMsg.style.display = 'none';

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(function() {
                resetForm();
                successMsg.style.display = 'none';
            }, 3000);
        }

        /**
         * –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π)
         */
        function showError(errorText = '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.') {
            const successMsg = document.getElementById('successMessage');
            const errorMsg = document.getElementById('errorMessage');
            
            errorMsg.textContent = `‚ùå ${errorText}`;
            errorMsg.style.display = 'block';
            successMsg.style.display = 'none';

            // –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫—É —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(function() {
                errorMsg.style.display = 'none';
            }, 5000);
        }

        /**
         * –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
         */
        function resetForm() {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            document.querySelectorAll('.problem-item').forEach(item => {
                item.classList.remove('selected');
            });

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('input[name="problem"]').forEach(radio => {
                radio.checked = false;
            });

            // –°–∫—Ä—ã–≤–∞–µ–º –∏ –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ –¥–ª—è —Ç–µ–∫—Å—Ç–∞
            const customText = document.getElementById('customText');
            customText.style.display = 'none';
            customText.value = '';
        }

        // ============ –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM ============
        
        /**
         * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Chat ID –≥—Ä—É–ø–ø—ã
         * 1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
         * 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
         * 3. –í—ã–∑–æ–≤–∏—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª–∏: getChatId()
         */
        async function getChatId() {
            const BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
            
            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`;
                const response = await fetch(url);
                const data = await response.json();
                
                console.log('–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:');
                data.result.forEach((update, index) => {
                    if (update.message && update.message.chat) {
                        console.log(`${index + 1}. Chat ID: ${update.message.chat.id}, –ù–∞–∑–≤–∞–Ω–∏–µ: "${update.message.chat.title || update.message.chat.first_name}"`);
                    }
                });
                
                return data;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è Chat ID:', error);
            }
        }

        /**
         * –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
         */
        async function testTelegramSend() {
            const testData = {
                roomDisplayName: '–¢–ï–°–¢_–¢—É–∞–ª–µ—Ç_–º—É–∂_–ö–æ—Ä–ø—É—Å_–ê_4_—ç—Ç',
                problemDescription: '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                date: new Date().toLocaleDateString('ru-RU'),
                time: new Date().toLocaleTimeString('ru-RU')
            };
            
            console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...');
            const result = await sendToTelegram(testData);
            
            if (result.success) {
                console.log('‚úÖ –¢–µ—Å—Ç —É—Å–ø–µ—à–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram');
            } else {
                console.log('‚ùå –¢–µ—Å—Ç –Ω–µ –ø—Ä–æ—à–µ–ª:', result.error);
            }
        }
        
        /**
         * –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π
         * –í—ã–∑–æ–≤–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞: testQRRoom('–¢—É–∞–ª–µ—Ç_–º—É–∂_–ö–æ—Ä–ø—É—Å_–ê_4_—ç—Ç')
         */
        function testQRRoom(roomName) {
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL
            const newUrl = `${window.location.origin}${window.location.pathname}?room=${encodeURIComponent(roomName)}`;
            window.history.pushState({}, '', newUrl);
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadRoomFromQR();
            updateRoomDisplay();
            showDebugInfo();
            
            console.log('–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–º–µ—â–µ–Ω–∏–µ:', roomData);
        }

        /**
         * –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ø–æ–º–µ—â–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         */
        function showExampleRooms() {
            console.log('–ü—Ä–∏–º–µ—Ä—ã –ø–æ–º–µ—â–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:');
            console.log('testQRRoom("–¢—É–∞–ª–µ—Ç_–º—É–∂_–ö–æ—Ä–ø—É—Å_–ê_4_—ç—Ç")');
            console.log('testQRRoom("–¢—É–∞–ª–µ—Ç_–∂–µ–Ω_–ö–æ—Ä–ø—É—Å_–ë_2_—ç—Ç")');
            console.log('testQRRoom("–ö—É—Ö–Ω—è_–ö–æ—Ä–ø—É—Å_–ê_1_—ç—Ç")');
            console.log('testQRRoom("–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è_301")');
            console.log('testQRRoom("–°–∫–ª–∞–¥_–ø–æ–¥–≤–∞–ª")');
        }
    </script>
</body>
</html>
